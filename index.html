<!DOCTYPE html>
<html>

<head>
    <title>Rock Paper Scissors</title>
</head>

<body>
    <h1>Rock - Paper - Scissors</h1>
    <script>

        //Player Input function to validate data entry
        function playerInput() {
            let flag = true;
            let text = null;
            while (flag) {
                text = prompt("Please type your action for this turn - ROCK, PAPER or SCISSORS:");
                let newText = text.toUpperCase();
                if (plays.indexOf(newText) != -1) {
                    return newText;
                }
                else {
                    alert("You must type either ROCK, PAPER, or SCISSORS");
                }
            }
        }
        //The random function returns a number between 0 and 2, which is used as the chosen
        //index for the plays list and determine the CPU's play.
        function computerPlay() {
            return plays[Math.floor(Math.random() * 3)];

        }

        function playRound(playerSelection, computerSelection) {
            switch (true) {
                case (playerSelection == plays[0] && computerSelection == plays[2]):
                case (playerSelection == plays[1] && computerSelection == plays[0]):
                case (playerSelection == plays[2] && computerSelection == plays[1]):
                    return 1;
                    break;
                case (playerSelection == computerSelection):
                    return 2;
                    break;
                default:
                    return 0;
            }
        }

        function game() {
            //EDIT ALL ALERTS WITH CONSOLE.LOG()
            let cpuWin = 0;
            let playerWin = 0;
            let playerChoice;
            let computerChoice;
            while ((cpuWin < 3) && (playerWin < 3)) {
                playerChoice = playerInput();
                computerChoice = computerPlay();
                if (playRound(playerChoice, computerChoice) == 1) {
                    alert("You win! " + playerChoice + " beats " + computerChoice + "!");
                    playerWin++;
                }
                else if (playRound(playerChoice, computerChoice) == 0) {
                    alert("You lose! " + computerChoice + " beats " + playerChoice + "!");
                    cpuWin++;
                }
                else if (playRound(playerChoice, computerChoice) == 2) {
                    alert("Draw! Both player and computer selected " + playerChoice + "!");
                }
            }
            if (cpuWin == 3) alert("You lose! The computer has won 3 games! Try again next time!");
            else if (playerWin == 3) alert("You win! You have bested the computer in 3 games!");
        }

        const plays = ["ROCK", "PAPER", "SCISSORS"];
        game();
    </script>
</body>

</html>